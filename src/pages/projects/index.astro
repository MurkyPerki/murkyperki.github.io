---
import Layout from "../../layouts/Layout.astro";
import { getCollection } from "astro:content";

const projects = await getCollection("projects");
---
<Layout title="Projects â€” Max Burkhardt" description="Browse my game development projects including gameplay programming, level design, and AI implementations.">
  <div class="container" style="padding: var(--spacing-xl) var(--spacing-md);">
    <div class="reveal">
      <h1 style="margin-bottom: var(--spacing-sm);">Projects</h1>
      <p style="font-size: 1.125rem; color: var(--color-text-muted); margin-bottom: var(--spacing-xl); max-width: 600px;">
        A collection of my game development work, featuring gameplay systems, level design, and technical implementations.
      </p>
    </div>
    
    <div class="grid" style="margin-top: var(--spacing-xl);">
      {projects.map((project, index) => (
        <a href={`/projects/${project.slug}/`} class="card reveal" style={`transition-delay: ${index * 100}ms;`}>
          {project.data.cover && (
            <img 
              src={project.data.cover} 
              alt={`${project.data.title} cover`}
              style="width: 100%; height: 220px; object-fit: cover; border-radius: 8px; margin-bottom: var(--spacing-md);"
            />
          )}
          {!project.data.cover && (
            <div style="width: 100%; height: 220px; background: linear-gradient(135deg, var(--color-bg-secondary) 0%, var(--color-border) 100%); border-radius: 8px; margin-bottom: var(--spacing-md); display: flex; align-items: center; justify-content: center; color: var(--color-text-muted); opacity: 0.5; font-size: 1.25rem; font-weight: 600;">
              {project.data.title}
            </div>
          )}
          <h3>{project.data.title}</h3>
          {project.data.role && (
            <p style="font-size: 0.875rem; color: var(--color-primary); font-weight: 600; margin-bottom: var(--spacing-sm);">{project.data.role}</p>
          )}
          {project.data.pitch && (
            <p style="color: var(--color-text-muted); margin-bottom: var(--spacing-sm); line-height: 1.6;">{project.data.pitch}</p>
          )}
          {project.data.highlights && project.data.highlights.length > 0 && (
            <div class="tags">
              {project.data.highlights.slice(0, 3).map((tag) => (
                <span class="tag">{tag}</span>
              ))}
            </div>
          )}
        </a>
      ))}
    </div>
  </div>
</Layout>
