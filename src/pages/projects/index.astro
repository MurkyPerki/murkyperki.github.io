---
import Layout from "../../layouts/Layout.astro";
import { getCollection } from "astro:content";

const projects = await getCollection("projects");
---

<Layout title="Projects â€” Max Burkhardt" description="Collection of game development projects showcasing gameplay programming, level design, and AI implementation.">
  <section class="container" style="padding: var(--spacing-xl) var(--spacing-md) var(--spacing-xxl);">
    <div class="reveal">
      <h1 style="margin-bottom: var(--spacing-xs);">Projects</h1>
      <p class="text-muted text-lg" style="margin-bottom: var(--spacing-xl);">
        A showcase of my work in game development
      </p>
    </div>
    
    <div class="grid-3">
      {projects.map((project) => (
        <a href={`/projects/${project.slug}/`} class="card reveal">
          {project.data.cover ? (
            <img 
              src={project.data.cover} 
              alt={project.data.title}
              style="width: 100%; aspect-ratio: 16/10; object-fit: cover; border-radius: 6px; margin-bottom: var(--spacing-md);"
            />
          ) : (
            <div style="width: 100%; aspect-ratio: 16/10; background: linear-gradient(135deg, var(--color-card-hover) 0%, var(--color-border) 100%); border-radius: 6px; margin-bottom: var(--spacing-md); display: flex; align-items: center; justify-content: center; border: 1px solid var(--color-border);">
              <span style="color: var(--color-muted); opacity: 0.3; font-size: 1.5rem; font-weight: 600;">{project.data.title}</span>
            </div>
          )}
          
          <h3 style="margin-bottom: 0.25rem;">{project.data.title}</h3>
          
          {project.data.role && (
            <p class="text-muted" style="font-size: 0.875rem; margin-bottom: var(--spacing-sm);">
              {project.data.role}
            </p>
          )}
          
          {project.data.pitch && (
            <p style="font-size: 0.9375rem; margin-bottom: var(--spacing-sm); color: var(--color-text);">
              {project.data.pitch}
            </p>
          )}
          
          {project.data.highlights && project.data.highlights.length > 0 && (
            <div class="tags">
              {project.data.highlights.slice(0, 3).map((tag) => (
                <span class="tag">{tag}</span>
              ))}
            </div>
          )}
        </a>
      ))}
    </div>
  </section>
</Layout>
